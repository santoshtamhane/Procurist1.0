<!--
  Generated template for the SearchResultPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header> 
 <ion-navbar>
<button ion-button icon-only menuToggle>
      <ion-icon name="menu"></ion-icon> 
    </button>

    <ion-title>Search Result</ion-title>

<ion-buttons end>
      <button ion-button icon-only (click)="goHome()">
        <ion-icon name="home"></ion-icon>
        </button>
    </ion-buttons> 
    </ion-navbar>
</ion-header>


<ion-content >

<ion-item>
               <ion-label  stacked ><ion-icon name="pin" color="primary"></ion-icon> Location</ion-label>
                    <ion-select [(ngModel)]="locn" placeholder="All" (ionChange)="filterLocn(locn)">
                    <ion-option>All</ion-option>
                    <ion-option *ngFor="let location of Locations|async">{{location.$key}}</ion-option>
                    </ion-select>
                   
 </ion-item>
  <!--<ion-list style="background-color:#c4d5e6;">
  
  <ion-item >-->
  <ion-card *ngFor="let srch of searches|async let i=index" #elem [attr.id]="i+1">
  <ion-card-header style="background-color:#003b46;">
     <h1 style="color:#fff;" >{{elem.id}}.{{ srch.Orgn }}</h1>
     </ion-card-header>
     <ion-card-content style="background-color:#07575b;" >
     <ion-grid>
     <ion-row>
     <ion-col style="background-color:#c4d5e6;">
     <p style="color:#07575b">Contact Person</p><h2 style="color:#763626">{{srch.Supplier}} </h2>
    <p style="color:#07575b">Location</p><h2 style="color:#763626">{{srch.City}}</h2>
     </ion-col>
     <ion-col style="background-color:#66a5ad">
  <p style="color:#07575b"> Average Rating</p>
  <h1 style="color:#fff ;font-size:500%;align:center">{{getAvgRating(srch.Orgn,1)}}{{trxnval}}</h1>
  <h4 style="color:#fff ;font-size:75%;align:left"> from {{contributorcount}} contributors</h4>
     </ion-col>
     </ion-row>
     </ion-grid>
     
    <ion-row>
    <ion-col>
    <button ion-button clear style="color:#fff" (click)="getAllComments(srch.Orgn,i)">View Comments</button>
        </ion-col>
    <ion-col>
   <button ion-button clear style="color:#fff" (click)="rate(srch.Orgn,srch.MainProduct,srch.Category)">Rate</button>
        </ion-col>
    
    </ion-row> 
    <ion-row>
    
    <ion-list *ngIf="elem.id==viewindex+1">
    
        <ion-item *ngFor= "let comm of AllComments|async let commindex=index">
        <p>{{commindex+1}}.
        {{comm.Comments}}</p>
        </ion-item>
        
    </ion-list>
    </ion-row>
    </ion-card-content>
    </ion-card>

  
</ion-content>
